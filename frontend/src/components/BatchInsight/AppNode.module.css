.appNode {
  background: #ffffff;
  border: 2px solid #d9d9d9;
  border-radius: var(--status-border-radius);
  padding: 8px 5px;
  width: 180px; /* 固定宽度 */
  height: 40px; /* 固定高度 */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  cursor: default;
  pointer-events: none;
  position: relative;
  /* 不设置 z-index，避免创建层叠上下文 */
  overflow: visible; /* 改为 visible 以显示缎带 */
  box-sizing: border-box; /* 确保 padding 和 border 包含在宽高内 */
}

.appNode::before {
  content: '';
  position: absolute;
  inset: -3px;
  background: #ffffff;
  border-radius: 8px;
  z-index: -2; /* 背景层在最下方 */
}

/* 缎带徽标 - 已移至 Badge.Ribbon 组件 */
/* 保留此注释以说明样式已迁移 */

/* 全局样式作为后备 */
/* Ribbon wrapper - 确保不创建层叠上下文 */
:global(.ant-ribbon-wrapper) {
  position: relative;
}

:global(.ant-ribbon) {
  position: absolute !important;
  top: 5px;
  /*z-index: 20; !* 使用更高的值确保在最上层 *!*/
  font-size: 10px !important;
  height: 16px !important;
  line-height: 16px !important;
  padding: 0 4px !important;
}

:global(.ant-ribbon-corner) {
  position: absolute !important;
  z-index: -1 !important; /* 使用负值确保在 node 下方 */
  border-width: 9px !important;
}


.appNode:hover {
  border-color: #1890ff;
  box-shadow: 0 4px 16px rgba(24, 144, 255, 0.2);
  transform: translateY(-2px);
}

/* 游离节点 */
.appNode.isolated {
  /*border-style: dashed;*/
}

.appNode.isolated:hover {
  border-color: #faad14;
  box-shadow: 0 4px 16px rgba(250, 173, 20, 0.2);
}

.content {
  display: flex;
  align-items: center;
  gap: 8px;
  height: 100%;
  position: relative;
}

.appName {
  font-size: 14px;
  font-weight: 600;
  color: #262626;
  /* 文字超出显示省略号 */
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

.content > span{
  display: inline-block;
}

.handle {
  width: 8px !important;
  height: 8px !important;
  background: #1890ff;
  border: 2px solid #fff;
}

.handle:hover {
  background: #40a9ff;
}

/* ==================== 状态样式 ==================== */

/* 预发布等待 - 标准蓝静态虚线边框 + 日暮背景 */
.appNode.preWaiting {
  border: var(--status-border-width-normal) dashed var(--status-pre-border-waiting);
  background: linear-gradient(135deg, var(--status-pre-bg-start) 0%, var(--status-pre-bg-end) 100%);
}

.appNode.preWaiting:hover {
  border-color: var(--status-pre-border-waiting);
  box-shadow: 0 4px 16px rgba(24, 144, 255, 0.3);
}

/* 预发布中 - 标准蓝虚线边框，滚动效果 + 日暮背景 */
.appNode.preDeploying {
  border: none;
  background: linear-gradient(135deg, var(--status-pre-bg-start) 0%, var(--status-pre-bg-end) 100%);
  position: relative;
}

.appNode.preDeploying::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--status-border-radius);
  padding: 3px;
  background:
    repeating-linear-gradient(90deg, var(--status-pre-border-deploying) 0, var(--status-pre-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap)),
    repeating-linear-gradient(0deg, var(--status-pre-border-deploying) 0, var(--status-pre-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap)),
    repeating-linear-gradient(90deg, var(--status-pre-border-deploying) 0, var(--status-pre-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap)),
    repeating-linear-gradient(0deg, var(--status-pre-border-deploying) 0, var(--status-pre-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap));
  background-size: 200% 2px, 2px 200%, 200% 2px, 2px 200%;
  background-position: 0 0, 100% 0, 0 100%, 0 0;
  background-repeat: no-repeat;
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  animation: statusBorderDashMove var(--status-animation-duration) linear infinite;
  pointer-events: none;
  z-index: 0; /* 边框在 content 上方 */
}

.appNode.preDeploying:hover {
  box-shadow: 0 4px 16px rgba(24, 144, 255, 0.3);
}

/* 预发布完成 - 标准蓝实线边框 + 日暮背景 */
.appNode.preDeployed {
  border-color: var(--status-pre-border-deployed);
  border-style: solid;
  border-width: var(--status-border-width-normal);
  background: linear-gradient(135deg, var(--status-pre-bg-start) 0%, var(--status-pre-bg-end) 100%);
}

.appNode.preDeployed:hover {
  border-color: var(--status-pre-border-deployed);
  box-shadow: 0 4px 16px rgba(24, 144, 255, 0.3);
}

/* 预发布失败 - 红色边框 + 失败背景 */
.appNode.preFailed {
  border-color: var(--status-failed-border);
  border-style: solid;
  border-width: var(--status-border-width-normal);
  background: linear-gradient(135deg, var(--status-failed-bg-start) 0%, var(--status-failed-bg-end) 100%);
}

.appNode.preFailed:hover {
  border-color: var(--status-failed-border);
  box-shadow: 0 4px 16px rgba(255, 77, 79, 0.3);
}

/* 预发布完成 - 标准蓝实线边框 + 日暮背景 */
.appNode.preAccepted {
  border-color: var(--status-pre-border-accepted);
  border-style: solid;
  border-width: var(--status-border-width-normal);
  background: linear-gradient(135deg, var(--status-pre-bg-start) 0%, var(--status-pre-bg-end) 100%);
}

.appNode.preAccepted:hover {
  border-color: var(--status-pre-border-accepted);
  box-shadow: 0 4px 16px rgba(24, 144, 255, 0.3);
}


/* 生产等待 - 橙红静态虚线边框 + 火山背景 */
.appNode.prodWaiting {
  border: var(--status-border-width-normal) dashed var(--status-prod-border-waiting);
  background: linear-gradient(135deg, var(--status-prod-bg-start) 0%, var(--status-prod-bg-end) 100%);
}

.appNode.prodWaiting:hover {
  border-color: var(--status-prod-border-waiting);
  box-shadow: 0 4px 16px rgba(250, 84, 28, 0.3);
}

/* 生产部署中 - 橙红虚线边框，滚动效果 + 火山背景 */
.appNode.prodDeploying {
  border: none;
  background: linear-gradient(135deg, var(--status-prod-bg-start) 0%, var(--status-prod-bg-end) 100%);
  position: relative;
}

.appNode.prodDeploying::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--status-border-radius);
  padding: 3px;
  background:
    repeating-linear-gradient(90deg, var(--status-prod-border-deploying) 0, var(--status-prod-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap)),
    repeating-linear-gradient(0deg, var(--status-prod-border-deploying) 0, var(--status-prod-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap)),
    repeating-linear-gradient(90deg, var(--status-prod-border-deploying) 0, var(--status-prod-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap)),
    repeating-linear-gradient(0deg, var(--status-prod-border-deploying) 0, var(--status-prod-border-deploying) var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-length), transparent var(--status-dash-gap));
  background-size: 200% 3px, 3px 200%, 200% 3px, 3px 200%;
  background-position: 0 0, 100% 0, 0 100%, 0 0;
  background-repeat: no-repeat;
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  animation: statusBorderDashMove var(--status-animation-duration) linear infinite;
  pointer-events: none;
  z-index: 20; /* 边框在 content 上方 */
}

.appNode.prodDeploying:hover {
  box-shadow: 0 4px 16px rgba(250, 84, 28, 0.3);
}

/* 生产部署完成 - 绿色实线边框 + 火山背景 */
.appNode.prodDeployed {
  border-color: var(--status-prod-border-deployed);
  border-style: solid;
  border-width: var(--status-border-width-normal);
  background: linear-gradient(135deg, var(--status-prod-bg-start) 0%, var(--status-prod-bg-end) 100%);
}

.appNode.prodDeployed:hover {
  border-color: var(--status-prod-border-deployed);
  box-shadow: 0 4px 16px rgba(250, 84, 28, 0.3);
}

/* 生产部署失败 - 红色边框 + 失败背景 */
.appNode.prodFailed {
  border-color: var(--status-failed-border);
  border-style: solid;
  border-width: var(--status-border-width-normal);
  background: linear-gradient(135deg, var(--status-failed-bg-start) 0%, var(--status-failed-bg-end) 100%);
}

.appNode.prodFailed:hover {
  border-color: var(--status-failed-border);
  box-shadow: 0 4px 16px rgba(255, 77, 79, 0.3);
}

/* 生产验收完成 - 绿色实线边框 + 火山背景 */
.appNode.prodAccepted {
  border-color: var(--status-prod-border-accepted);
  border-style: solid;
  border-width: var(--status-border-width-normal);
  background: linear-gradient(135deg, var(--status-prod-bg-start) 0%, var(--status-prod-bg-end) 100%);
}

.appNode.prodAccepted:hover {
  border-color: var(--status-prod-border-accepted);
  box-shadow: 0 4px 16px rgba(250, 84, 28, 0.3);
}


/* 为部署中的状态添加脉冲效果 */
.appNode.preDeploying::after,
.appNode.prodDeploying::after {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: 8px;
  opacity: 0;
  pointer-events: none;
  animation: statusPulse 2s ease-in-out infinite;
  z-index: 0;
}

.appNode.preDeploying::after {
  box-shadow: 0 0 0 4px rgba(24, 144, 255, 0.4);
}

.appNode.prodDeploying::after {
  box-shadow: 0 0 0 4px rgba(250, 84, 28, 0.4);
}

/* ==================== 动画定义（复制自 status-theme.css 以支持 CSS Modules） ==================== */
@keyframes statusBorderDashMove {
  0% {
    background-position: 0 0, 100% 0, 0 100%, 0 0;
  }
  100% {
    background-position: 24px 0, 100% 24px, -24px 100%, 0 -24px;
  }
}
